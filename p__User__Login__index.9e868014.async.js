"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{2067:function(te,v,s){s.r(v);var k=s(15009),c=s.n(k),R=s(97857),g=s.n(R),U=s(99289),M=s.n(U),W=s(5574),j=s.n(W),F=s(2618),x=s(87547),P=s(94149),m=s(11625),A=s(28906),n=s(35312),S=s(99138),E=s(2453),K=s(17093),Z=s(12029),N=s(42075),z=s(71577),w=s(67610),O=s(67294),H=s(73935),$=s(61621),b=s(91571),e=s(85893),re=function(){var i=useEmotionCss(function(o){var _=o.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:_.colorPrimaryActive}}});return _jsxs(_Fragment,{children:[_jsx(AlipayCircleOutlined,{className:i},"AlipayCircleOutlined"),_jsx(TaobaoCircleOutlined,{className:i},"TaobaoCircleOutlined"),_jsx(WeiboCircleOutlined,{className:i},"WeiboCircleOutlined")]})},G=function(){var i=(0,A.l)(function(o){var _=o.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:_.borderRadius,":hover":{backgroundColor:_.colorBgTextHover}}});return(0,e.jsx)("div",{className:i,"data-lang":!0,children:n.SelectLang&&(0,e.jsx)(n.SelectLang,{})})},Q=function(i){var o=i.content;return(0,e.jsx)(S.Z,{style:{marginBottom:24},message:o,type:"error",showIcon:!0})},V=function(){var i=(0,O.useState)({}),o=j()(i,2),_=o[0],J=o[1],X=(0,O.useState)("account"),C=j()(X,2),h=C[0],y=C[1],L=(0,n.useModel)("@@initialState"),ie=L.initialState,Y=L.setInitialState,q=(0,A.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}),l=(0,n.useIntl)(),ee=function(){var d=M()(c()().mark(function u(r){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r&&(0,H.flushSync)(function(){Y(function(f){return g()(g()({},f),{},{currentUser:r})})});case 1:case"end":return t.stop()}},u)}));return function(r){return d.apply(this,arguments)}}(),se=function(){var d=M()(c()().mark(function u(r){var p,t,f,T,B,I;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("handle",r),h!=="register"){a.next=6;break}p=b.Z.register(g()({},r)),p?E.ZP.success("\u0110\u0103ng k\xED t\xE0i kho\u1EA3n th\xE0nh c\xF4ng!"):E.ZP.error("C\xF3 l\u1ED7i x\u1EA3y ra, vui l\xF2ng th\u1EED l\u1EA1i!"),a.next=19;break;case 6:return a.next=8,b.Z.login(g()({},r));case 8:if(t=a.sent,console.log("user",t),!t){a.next=19;break}return f=l.formatMessage({id:"pages.login.success",defaultMessage:"\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng"}),E.ZP.success(f),a.next=15,ee(t);case 15:return T=new URL(window.location.href).searchParams,n.history.push(T.get("redirect")||"/"),J({status:"success",type:"account",currentAuthority:"admin"}),a.abrupt("return");case 19:return a.prev=19,a.next=22,(0,F.x4)(g()(g()({},r),{},{type:h}));case 22:B=a.sent,console.log(B),a.next=31;break;case 26:a.prev=26,a.t0=a.catch(19),I=l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(a.t0),E.ZP.error(I);case 31:case"end":return a.stop()}},u,null,[[19,26]])}));return function(r){return d.apply(this,arguments)}}(),ae=_.status,ne=_.type;return(0,e.jsx)(K.ZP,{theme:{token:{colorPrimary:"#7942FE"}},children:(0,e.jsxs)("div",{className:q,children:[(0,e.jsx)(n.Helmet,{children:(0,e.jsxs)("title",{children:[l.formatMessage({id:"menu.login",defaultMessage:"\u0110\u0103ng nh\u1EADp"}),"- ",w.Z.title]})}),(0,e.jsx)(G,{}),(0,e.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100%",paddingInline:"32px",paddingBlock:"24px",alignItems:"center"},children:(0,e.jsxs)(Z.Z,{style:{width:"328px",maxWidth:"75vw",minWidth:"280px"},onFinish:function(){var d=M()(c()().mark(function u(r){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(r);case 2:case"end":return t.stop()}},u)}));return function(u){return d.apply(this,arguments)}}(),children:[(0,e.jsx)("div",{className:"d-flex justify-center align-center mb-16",children:(0,e.jsxs)(N.Z,{direction:"vertical",align:"center",children:[(0,e.jsx)($.Z,{src:"/todo.svg",preview:!1,children:" "}),h=="account"?(0,e.jsx)("h1",{children:"\u0110\u0103ng nh\u1EADp"}):(0,e.jsx)("h1",{children:"\u0110\u0103ng k\xED"})]})}),ae==="error"&&ne==="account"&&(0,e.jsx)(Q,{content:l.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"T\xE0i kho\u1EA3n ho\u1EB7c m\u1EADt kh\u1EA9u kh\xF4ng \u0111\xFAng"})}),h==="account"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m.Z,{name:"email",fieldProps:{size:"large",prefix:(0,e.jsx)(x.Z,{})},placeholder:l.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"Nh\u1EADp t\xE0i kho\u1EA3n"}),rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"T\xE0i kho\u1EA3n l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c!"})},{required:!0,type:"email",message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.username.invalid",defaultMessage:"Email v\u1EEBa nh\u1EADp kh\xF4ng h\u1EE3p l\u1EC7!"})}]}),(0,e.jsx)(m.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(P.Z,{})},placeholder:l.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u"}),rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"M\u1EADt kh\u1EA9u l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c"})}]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m.Z,{name:"name",fieldProps:{size:"large",prefix:(0,e.jsx)(x.Z,{})},placeholder:l.formatMessage({id:"pages.login.display.placeholder",defaultMessage:"Nh\u1EADp t\xEAn hi\u1EC3n th\u1ECB"}),rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.display.required",defaultMessage:"T\xEAn hi\u1EC3n th\u1ECB l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c!"})}]}),(0,e.jsx)(m.Z,{name:"email",fieldProps:{size:"large",prefix:(0,e.jsx)(x.Z,{})},placeholder:l.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"Nh\u1EADp t\xE0i kho\u1EA3n"}),rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"T\xE0i kho\u1EA3n l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c!"})},{type:"email",message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.username.invalid",defaultMessage:"T\xE0i kho\u1EA3n l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c!"})}]}),(0,e.jsx)(m.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(P.Z,{})},placeholder:l.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"Nh\u1EADp m\u1EADt kh\u1EA9u"}),rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"M\u1EADt kh\u1EA9u l\xE0 tr\u01B0\u1EDDng b\u1EAFt bu\u1ED9c"})}]})]}),(0,e.jsx)("div",{style:{marginBottom:24}}),(0,e.jsx)(z.ZP,{type:"primary",htmlType:"submit",size:"large",style:{width:"100%"},children:h==="account"?"\u0110\u0103ng nh\u1EADp":"\u0110\u0103ng k\xED"}),(0,e.jsx)("div",{children:h=="account"?(0,e.jsxs)("div",{style:{float:"right",fontSize:14},className:"mb-16",children:["Ch\u01B0a c\xF3 t\xE0i kho\u1EA3n? "," ",(0,e.jsx)("a",{style:{color:"#7942FE"},className:"hover",onClick:function(){return y("register")},children:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.register"})})]}):(0,e.jsxs)("div",{style:{float:"right",fontSize:14},className:"mb-16",children:["\u0110\xE3 c\xF3 t\xE0i kho\u1EA3n "," ",(0,e.jsx)("a",{style:{color:"#7942FE"},className:"hover",onClick:function(){return y("account")},children:(0,e.jsx)(n.FormattedMessage,{id:"pages.login.signin"})})]})})]})})})]})})};v.default=V}}]);
